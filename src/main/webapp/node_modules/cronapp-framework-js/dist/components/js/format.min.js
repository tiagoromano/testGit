!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module?module.exports=e():t.format=e()}(this,function(){return function(t,e){"use strict";if(!t||isNaN(+e))return e;var n,i,s,r,l,o,f,h=t.length,g=t.search(/[0-9\-\+#]/),u=0<g?t.substring(0,g):"",c=t.split("").reverse().join(""),d=c.search(/[0-9\-\+#]/),a=h-d,p=t.substring(a,1+a),b=a+("."===p||","===p?1:0),m=0<d?t.substring(b,h):"",x=(e="-"===(t=t.substring(g,b)).charAt(0)?-e:+e)<0?e=-e:0,j=(n=t.match(/[^\d\-\+#]/g))&&n[n.length-1]||".",v=n&&n[1]&&n[0]||",";if(t=t.split(j),e=+(e=e.toFixed(t[1]&&t[1].length))+"",s=t[1]&&t[1].lastIndexOf("0"),(!(l=e.split("."))[1]||l[1]&&l[1].length<=s)&&(e=(+e).toFixed(s+1)),o=t[0].split(v),t[0]=o.join(""),-1<(i=t[0]&&t[0].indexOf("0")))for(;l[0].length<t[0].length-i;)l[0]="0"+l[0];else 0==+l[0]&&(l[0]="");if((e=e.split("."))[0]=l[0],r=o[1]&&o[o.length-1].length){for(c="",a=(f=e[0]).length%r,h=f.length,b=0;b<h;b++)c+=f.charAt(b),!((b-a+1)%r)&&b<h-r&&(c+=v);e[0]=c}return e[1]=t[1]&&e[1]?j+e[1]:"","0"!==(n=e.join(""))&&""!==n||(x=!1),u+(x?"-":"")+n+m}});